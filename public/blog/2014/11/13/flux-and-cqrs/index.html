<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Flux and cqrs &middot; Thomas Coopman</title>

  
  <link rel="stylesheet" href="https://thomascoopman.eu/css/poole.css">
  <link rel="stylesheet" href="https://thomascoopman.eu/css/hyde.css">
  <link rel="stylesheet" href="https://thomascoopman.eu/css/poole-overrides.css">
  <link rel="stylesheet" href="https://thomascoopman.eu/css/hyde-overrides.css">
  <link rel="stylesheet" href="https://thomascoopman.eu/css/hyde-x.css">
  <link rel="stylesheet" href="https://thomascoopman.eu/css/highlight/sunburst.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://thomascoopman.eu/touch-icon-144-precomposed.png">
  <link href="https://thomascoopman.eu/favicon.png" rel="icon">

  
  
  
  

  <meta name="description" content="About the simularities between flux and cqrs">
  <meta name="keywords" content="">
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-56701000-2', 'auto');
    ga('send', 'pageview');
  </script>
  
</head>
<body class="theme-base-08">
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      
      <h1>Thomas Coopman</h1>
      <p class="lead">Software Consultant</p>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a href="https://thomascoopman.eu/">Blog</a></li>
      
      <li class="sidebar-nav-item"><a href="https://thomascoopman.eu/resume/">Resume</a></li>
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <a href="https://github.com/tcoopman/"><i class="fa fa-github-square fa-3x"></i></a>
      <a href="https://bitbucket.org/tcoopman/"><i class="fa fa-bitbucket-square fa-3x"></i></a>
      
      <a href="https://www.linkedin.com/in/thomas-coopman-a6860622?trk=hp-identity-name"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="https://plus.google.com/u/0/109624499308077610663"><i class="fa fa-google-plus-square fa-3x"></i></a>
      
      <a href="https://twitter.com/tcoopman"><i class="fa fa-twitter-square fa-3x"></i></a>
      
      <a href="https://thomascoopman.eu/index.xml" type="application/rss+xml"><i class="fa fa-rss-square fa-3x"></i></a>
      </li>
    </ul>

    

    <p>Copyright &copy; 2016 <a href="https://thomascoopman.eu/license/">License</a><br/>
       Powered by <a href="http://gohugo.io">Hugo</a> and <a href="https://github.com/zyro/hyde-x">Hyde-X</a></p>
  </div>
</div>


<div class="content container">
  <div class="post">
    <h1 class="post-title">Flux and cqrs</h1>
    <span class="post-date">Nov 13, 2014 &middot; 2 minute read
    </span>
    

<p>About flux and cqrs, what do I want to write about this???</p>

<p>Things I want to find out.
actions in the past: because it&rsquo;s something that has happend. nothing todo about it.</p>

<p>deleting actions is not possible, only update.
Store all actions in an event store for replay?</p>

<p>How about authentication and validation actions and flux.
For example: action &lsquo;MESSAGE_SUBMITTED&rsquo;. But the message must be validated before
it is added. The MessageStore is responsible for validating because it&rsquo;s specific logic
of the store.</p>

<p>(If you don&rsquo;t want to solve it like this you have to wait on the server before moving on.
You can move on as soon as the server says: everything ok.)</p>

<p>There are now 2 possible outcomes:</p>

<ol>
<li>The message gets validated and it&rsquo;s added to the store.</li>
<li>The message is invalid and can not be added.</li>
</ol>

<p>Situation 1 easy: proceed. Situtation 2 is a bit harder. This is how I solve it:
The store has an error object that gets set if there is an error. Now a component
can see that the error is set, and that the object is not submitted.</p>

<p>The only problem I have with this setup is that the name of the actions is not a
real mirror of the business event. For example:</p>

<p>MESSAGE_DELETED. If the MessageStore checks if the user has the necessary authentication
to execute the delete and stops the delete, the name MESSAGE_DELETED is now
incorrect. MESSAGE_TRY_DELETE would be better.</p>

<p>The problem also exists between client and server. The server cannot execute
any of the actions from the client without verification, so every action
can possible fail.</p>

<p>Replay is still possible, but the names are not good enough&hellip;</p>

<p>Solution for this:</p>

<p>name the actions not in the past.</p>

<p>what about the api???</p>

<p>Flux and API pattern (see blog about it&hellip;)</p>

<p>ActionCreators (API) send the action and also send to the server.
Wouldn&rsquo;t it be nice to just sent the samen actions to the server? Yes but
1. probably not necessary to send all actions to the server.
2. pattern of confirmed, should not be sent to the server again. For example
message submitted fails on the server because of &hellip;. authentication. The api
receives a new action: MESSAGE_SUBMITTED_FAILED (good name?). This action
doesn&rsquo;t need to be sent of to the server again.
Should the server internally use the same action names??</p>

<h2 id="resources:4ec0de84863d410c76a80e5b482ed58a">Resources</h2>

<p>gist of &hellip;.
<a href="https://gist.github.com/abdullin/5953ab4f5eae0a7fc8f9#comment-1326317">https://gist.github.com/abdullin/5953ab4f5eae0a7fc8f9#comment-1326317</a>
<a href="http://www.code-experience.com/async-requests-with-react-js-and-flux-revisited/">http://www.code-experience.com/async-requests-with-react-js-and-flux-revisited/</a></p>

  </div>
  
</div>




<script src="https://thomascoopman.eu/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>

